[

{
"title"    : "Manjaro安装配置踩坑",
"category" : "",
"tags"     : "Manjaro",
"url"      : "/blog/2021/04/12/manjaro-install/",
"date"     : "2021-04-12 00:00:00 +0800",
"content"  : "LVM方式的安装我安装的版本是Manjaro 21 KDE，常规安装按图形界面方式很快，没有任何问题。但 calamares当前版本对 lvm 的支持还不是很好，直接在图形界面采用 lvm 点下一步后会马上闪退，或者进入安装过程后报各种卷创建的错误，实在无招，只能曲线救国。最开始手动创建卷，然后进图形界面选择文件系统和挂载点，安装倒是没问题了，最后也提示安装成功。但重启后找不到系统，还是会继续进入U盘。推测是 calamares 在 lvm 方式下创建 efi 分区有bug，gitHub上也有很多相关issue。试了N遍之后，最后的办法是先按常规方式安装一遍，保证重启后能正常进入系统。再用U盘进入live environment，在已分区的基础上手动创建物理卷，卷组和逻辑卷。efi 和 swap 不要动(注意在后续图形安装界面中 efi 千万别选择格式化，要的就是保留 efi 之前的内容)，其他分区可自由分配卷组和逻辑卷。最后进入图形安装界面选择挂载点和文件系统安装即可。Intel核显 + NVIDIA独显 的问题  Linus Torvalds:  NVIDIA, fuck u!安装完之后一开始正常使用没什么问题，但是一竖屏后就有撕裂现象。解决办法：安装 optimus-manager 和 optimus-manager-qt ，切换为 NVIDIA 之后就没问题了。大黄蜂方案已经过时且不再维护了，不建议使用。optimus-manager ( A Linux program to handle GPU switching on Optimus laptops)换源sudo pacman-mirros -i -c China -m rank       选中一个sudo pacman -Syy      更新软件源sudo pacman -Syu      更新全部软件安装搜狗拼音添加 archlinuxcn 软件源，/etc/pacman.conf 在最后加入SigLevel = Optional TrustAll Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/archsudo pacman -Syy      更新软件源sudo pacman -S archlinux-keyring     更新软件密钥sudo pacman -S fcitx-im     安装输入法框架sudo pacman -S fcitx-configtool     安装输入法配置工具在软件中心找到并安装 fcitx-sogoupinyin( 注意：一定要按顺序安装，不能直接安装最后一个，会导致依赖缺失，不能配置等问题)在 /etc/environment 中加入123GTK_IM_MODULE=fcitxQT_IM_MODULE=fcitxXMODIFIERS=im=fcitx重启完成微信聊天框中文乱码原因是缺失字体。下载字体 链接: https://pan.baidu.com/s/1OkeEGR4hivnWur3fDuJxrQ  密码: k4ge放到 ～/.deepinwine/Deepin-WeChat/drive_c/Windows/Fonts 目录下，点击安装即可。IDEA Ultimate 输入法候选框不跟随鼠标，一直在左下角这是一个 idea 古老又没人管的bug解决办法参考：https://ld246.com/article/1601280084643下载修改过的  JetBrainsRuntime ，在 idea.sh 启动脚本开头添加export IDEA_JDK=xport IDEA_JDK=目录/java-11.0.7-jetbrain但是有个新的问题，markdown文件 的预览按钮不见了，也懒得折腾了，写 markdown 用专门的编辑器吧，比如 TypoarIDEA 不会显示全局系统菜单Manjaro安装了 Application Title 插件后所有应用的菜单都会在顶部的全局系统菜单显示，但 IDEA 不会。官方解决办法： idea中安装 JavaFX Runtime for Plugins 插件。但是有点延迟，打开 idea 后要过一会菜单才会出来，也是很烦。美化Make Your KDE Plasma Desktop Look Better"
} 

]